name: top
version: 0.2
synopsis: Top (typed oriented protocol) API
description: See the <http://github.com/tittoassini/top online tutorial>.
homepage: http://github.com/tittoassini/top
category: Network
license:             BSD3
license-file:        LICENSE
author:              Pasqualino `Titto` Assini
maintainer:          tittoassini@gmail.com
copyright:           Copyright: (c) 2016 Pasqualino `Titto` Assini
cabal-version: >=1.10
build-type: Simple
Tested-With: GHC == 7.10.3 GHC == 8.0.1 GHC == 8.0.2
extra-source-files:
    stack.yaml
    stack710.yaml
    stack801.yaml
    stack802.yaml
    README.md

source-repository head
    type: git
    location: https://github.com/tittoassini/top

library
    
    if impl(ghc <8)
        build-depends:
            th-lift >=0.7.7
    
    if impl(ghcjs -any)
        build-depends:
            ghcjs-base >=0.2 && <0.3
    else
        exposed-modules:
            Repo.DB
            Repo.Disk
        build-depends:
            websockets >=0.9.8.2,
            hslogger >=1.2.10,
            acid-state >=0.14.2,
            safecopy >=0.9.3,
            filepath >=1.4.0.0
    exposed-modules:
        Data.Pattern
        Data.Pattern.Types
        Data.Pattern.TH
        Data.Pattern.Util
        Data.Pattern.Transform
        Network.Top
        Network.Top.Pipes
        Network.Top.Repo
        Network.Top.Types
        Network.Top.Run
        Network.Top.Util
        Network.Top.WebSockets
        Repo.Types
        Repo.Memory
    build-depends:
        async >=2.1.1,
        base >=4.7 && <5,
        bytestring >=0.10.6.0,
        data-default-class >=0.0.1,
        flat >=0.3,
        template-haskell >=2.10.0.0,
        pipes >=4.1.9,
        transformers >=0.4.2.0,
        zm >=0.2,
        text >=1.2.2.1,
        stm >=2.4.4.1,
        ListLike >=4.2.1,
        containers >=0.5.6.2,
        mtl >=2.2.1,
        deepseq >=1.4.1.1,
        extra >=1.4.10,
        time >=1.5.0.1,
        pretty >=1.1.2.0
    default-language: Haskell2010
    hs-source-dirs: src

test-suite top-test-repo
    type: exitcode-stdio-1.0
    main-is: RepoSpec.hs
    build-depends:
        base >=4.8.2.0,
        top >=0.1.1,
        zm >=0.2.4,
        tasty >=0.11.0.2,
        tasty-hunit >=0.9.2,
        directory >=1.2
    default-language: Haskell2010
    hs-source-dirs: test
    ghc-options: -threaded -rtsopts -with-rtsopts=-N

test-suite top-doctest
    type: exitcode-stdio-1.0
    main-is: DocSpec.hs
    build-depends:
        base >4 && <5,
        doctest >=0.11.1,
        filemanip >=0.3.6.3
    default-language: Haskell2010
    hs-source-dirs: test
    ghc-options: -threaded
